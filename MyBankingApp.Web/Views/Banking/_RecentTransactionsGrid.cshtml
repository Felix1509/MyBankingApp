@model List<MyBankingApp.Data.Entitites.Transaktion>

@if (Model != null && Model.Any())
{
    @Html.DevExpress().GridView(settings =>
        {
            settings.Name = "TransaktionenGrid";
            settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);

            // Callback Routes
            settings.CallbackRouteValues = new { Controller = "Banking", Action = "TransaktionenGridCallback" };

            // Einstellungen für kompakte Darstellung
            settings.SettingsBehavior.AllowSort = true;
            settings.Settings.ShowFilterRow = false;
            settings.Settings.ShowColumnHeaders = true;
            settings.SettingsPager.Visible = false;

            // Datum
            settings.Columns.Add(column =>
            {
                column.FieldName = "Buchungsdatum";
                column.Caption = "Datum";
                column.Width = System.Web.UI.WebControls.Unit.Percentage(25);
                column.PropertiesEdit.DisplayFormatString = "dd.MM.yy";
            });

            // Verwendungszweck
            settings.Columns.Add(column =>
            {
                column.FieldName = "Verwendungszweck";
                column.Caption = "Beschreibung";
                column.Width = System.Web.UI.WebControls.Unit.Percentage(50);
            });

            // Betrag
            settings.Columns.Add(column =>
            {
                column.FieldName = "Betrag";
                column.Caption = "Betrag";
                column.Width = System.Web.UI.WebControls.Unit.Percentage(25);
                column.PropertiesEdit.DisplayFormatString = "C";

                column.SetDataItemTemplateContent(c =>
                {
                    var betrag = (decimal)DataBinder.Eval(c.DataItem, "Betrag");
                    var cssClass = betrag >= 0 ? "text-success" : "text-danger";
                    var icon = betrag >= 0 ? "▼" : "▲";
                    Html.ViewContext.Writer.Write(string.Format("<strong class='{0}'>{1} {2:C}</strong>", cssClass, icon, betrag));
                });
            });

            // Styling
            settings.Styles.Header.Font.Size = System.Web.UI.WebControls.FontUnit.Point(11);
            settings.Styles.Cell.Font.Size = System.Web.UI.WebControls.FontUnit.Point(11);
            settings.Styles.Cell.Paddings.Padding = System.Web.UI.WebControls.Unit.Pixel(8);
            settings.Styles.AlternatingRow.BackColor = System.Drawing.Color.FromArgb(248, 249, 250);

        }).Bind(Model.Take(10).ToList()).GetHtml()

    <div style="padding: 15px; text-align: center; border-top: 1px solid #e5e7eb;">
        <a href="#" class="btn-block-link">
            <i class="fas fa-list"></i> Alle Transaktionen anzeigen
        </a>
    </div>
}
else
{
    <div style="text-align: center; padding: 40px; color: #9ca3af;">
        <i class="fas fa-receipt fa-3x" style="color: #e5e7eb; margin-bottom: 15px; display: block;"></i>
        <p>Noch keine Transaktionen vorhanden</p>
    </div>
}

<style type="text/css">
    .text-success {
        color: #10b981 !important;
    }

    .text-danger {
        color: #ef4444 !important;
    }

    .btn-block-link {
        display: block;
        width: 100%;
        background: transparent;
        color: #2563eb;
        border: 1px solid #2563eb;
        padding: 8px 16px;
        border-radius: 6px;
        text-decoration: none;
        transition: all 0.2s;
    }

        .btn-block-link:hover {
            background: #2563eb;
            color: white;
            text-decoration: none;
        }
</style>